<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from /home/suja/voxel_ws/src/robot_base/urdf/robotcar.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="robotcar">
  <!-- ======================== 机器人结构 ======================== -->
  <link name="base_footprint"/>
  <joint name="base_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <origin rpy="0 0 0" xyz="0 0 0.2"/>
  </joint>
  <link name="base_link">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.68 0.33 0.3"/>
      </geometry>
      <material name="blue">
        <color rgba="0.2 0.4 0.8 1.0"/>
      </material>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.68 0.33 0.3"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="20.0"/>
      <inertia ixx="0.3315" ixy="0" ixz="0" iyy="0.9206666666666667" iyz="0" izz="0.9521666666666668"/>
    </inertial>
  </link>
  <link name="left_wheel_link">
    <visual>
      <origin rpy="1.570796326795 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.03" radius="0.08"/>
      </geometry>
      <material name="black">
        <color rgba="0.1 0.1 0.1 1.0"/>
      </material>
    </visual>
    <collision>
      <origin rpy="1.570796326795 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.03" radius="0.08"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.0008375" ixy="0" ixz="0" iyy="0.0008375" iyz="0" izz="0.0016"/>
    </inertial>
  </link>
  <joint name="left_wheel_joint" type="continuous">
    <parent link="base_link"/>
    <child link="left_wheel_link"/>
    <origin rpy="0 0 0" xyz="0.22 0.13 -0.12000000000000001"/>
    <axis xyz="0 1 0"/>
  </joint>
  <link name="right_wheel_link">
    <visual>
      <origin rpy="1.570796326795 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.03" radius="0.08"/>
      </geometry>
      <material name="black">
        <color rgba="0.1 0.1 0.1 1.0"/>
      </material>
    </visual>
    <collision>
      <origin rpy="1.570796326795 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.03" radius="0.08"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.0008375" ixy="0" ixz="0" iyy="0.0008375" iyz="0" izz="0.0016"/>
    </inertial>
  </link>
  <joint name="right_wheel_joint" type="continuous">
    <parent link="base_link"/>
    <child link="right_wheel_link"/>
    <origin rpy="0 0 0" xyz="0.22 -0.13 -0.12000000000000001"/>
    <axis xyz="0 1 0"/>
  </joint>
  <!-- ======================== 后置万向轮 ======================== -->
  <link name="rear_caster_link">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.04"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.04"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.5"/>
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>
  </link>
  <joint name="rear_caster_joint" type="fixed">
    <parent link="base_link"/>
    <child link="rear_caster_link"/>
    <origin rpy="0 0 0" xyz="-0.22 0 -0.16"/>
  </joint>
  <!-- Gazebo simulation: Frictionless caster -->
  <gazebo reference="rear_caster_link">
    <mu1>0.0</mu1>
    <mu2>0.0</mu2>
    <material>Gazebo/Black</material>
  </gazebo>
  <!-- ======================== 传感器 ======================== -->
  <!-- Lidar: Mid-360 -->
  <link name="livox_frame">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.05" radius="0.03"/>
      </geometry>
      <material name="gray">
        <color rgba="0.5 0.5 0.5 1.0"/>
      </material>
    </visual>
  </link>
  <joint name="livox_joint" type="fixed">
    <parent link="base_link"/>
    <child link="livox_frame"/>
    <origin rpy="0 0.785398 0" xyz="0.34 0.0 0.15"/>
  </joint>
  <!-- IMU: 机体中心 -->
  <link name="imu_link">
    <visual>
      <geometry>
        <box size="0.02 0.02 0.01"/>
      </geometry>
      <material name="green">
        <color rgba="0.0 1.0 0.0 1.0"/>
      </material>
    </visual>
  </link>
  <joint name="imu_joint" type="fixed">
    <parent link="base_link"/>
    <child link="imu_link"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
  </joint>
  <!-- ======================== ros2_control ======================== -->
  <ros2_control name="RobotCar" type="system">
    <hardware>
      <plugin>robot_base/RobotCarHardwareInterface</plugin>
      <param name="serial_port_name">/dev/STM32</param>
      <param name="serial_baud_rate">115200</param>
      <param name="wheel_radius">0.08</param>
      <param name="wheel_separation">0.26</param>
      <param name="loop_rate">50</param>
      <param name="device_timeout">1000</param>
      <!-- IMU 参数已移除，由独立节点控制 -->
    </hardware>
    <joint name="left_wheel_joint">
      <command_interface name="velocity">
        <param name="min">-10.0</param>
        <param name="max">10.0</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="right_wheel_joint">
      <command_interface name="velocity">
        <param name="min">-10.0</param>
        <param name="max">10.0</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <!-- IMU 传感器接口已移除 -->
  </ros2_control>
</robot>
